(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const R of i.addedNodes)R.tagName==="LINK"&&R.rel==="modulepreload"&&s(R)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();const P=e=>{const{method:t,endpoint:n,variables:s}=e;return(e.fetch??fetch)(n,{method:t,headers:{"Content-Type":"application/json"},...t==="GET"?{}:{body:JSON.stringify(s)}})},A=1e6;class Y{async post(t){const n=await P({method:"POST",variables:t.variables,endpoint:`https://${t.rgsUrl}${t.url}`});if(n.status!==200){const r=await n.json().catch(()=>({}));throw new Error(r.message||`RGS API error: ${n.status} ${n.statusText}`)}return await n.json()}async get(t){const n=await P({method:"GET",endpoint:`https://${t.rgsUrl}${t.url}`});if(n.status!==200){const r=await n.json().catch(()=>({}));throw new Error(r.message||`RGS API error: ${n.status} ${n.statusText}`)}return await n.json()}}const m=new Y,g=()=>{const e=new URLSearchParams(window.location.search);return{sessionID:e.get("sessionID"),rgsUrl:e.get("rgs_url"),language:e.get("lang")||"en",currency:e.get("currency")||"USD"}},Z=()=>{const e=new URLSearchParams(window.location.search);return{replay:e.get("replay")==="true",amount:Number(e.get("amount"))||0,game:e.get("game")||"",version:e.get("version")||"",mode:e.get("mode")||"",event:e.get("event")||""}},ee=()=>new URLSearchParams(window.location.search).get("replay")==="true",te=async e=>{const t=g(),n=e?.sessionID||t.sessionID,s=e?.rgsUrl||t.rgsUrl,r=e?.language||t.language;if(!n)throw new Error("sessionID is required (provide in options or URL param)");if(!s)throw new Error("rgsUrl is required (provide in options or rgs_url URL param)");return m.post({rgsUrl:s,url:"/wallet/authenticate",variables:{sessionID:n,language:r}})},ne=async e=>{const t=g(),n=e.sessionID||t.sessionID,s=e.rgsUrl||t.rgsUrl,r=e.currency||t.currency;if(!n)throw new Error("sessionID is required (provide in options or URL param)");if(!s)throw new Error("rgsUrl is required (provide in options or rgs_url URL param)");return m.post({rgsUrl:s,url:"/wallet/play",variables:{mode:e.mode,currency:r,sessionID:n,amount:e.amount*A}})},re=async e=>{const t=g(),n=e?.sessionID||t.sessionID,s=e?.rgsUrl||t.rgsUrl;if(!n)throw new Error("sessionID is required (provide in options or URL param)");if(!s)throw new Error("rgsUrl is required (provide in options or rgs_url URL param)");return m.post({rgsUrl:s,url:"/wallet/end-round",variables:{sessionID:n}})},se=async e=>{const t=g(),n=e.sessionID||t.sessionID,s=e.rgsUrl||t.rgsUrl;if(!n)throw new Error("sessionID is required (provide in options or URL param)");if(!s)throw new Error("rgsUrl is required (provide in options or rgs_url URL param)");return m.post({rgsUrl:s,url:"/bet/event",variables:{sessionID:n,event:`${e.eventIndex}`}})},oe=async e=>{const t=g(),n=e.rgsUrl||t.rgsUrl;if(!n)throw new Error("rgsUrl is required (provide in options or rgs_url URL param)");return m.post({rgsUrl:n,url:"/game/search",variables:{mode:e.mode,search:e.search}})},ae=async e=>{const t=g(),n=e?.sessionID||t.sessionID,s=e?.rgsUrl||t.rgsUrl;if(!n)throw new Error("sessionID is required (provide in options or URL param)");if(!s)throw new Error("rgsUrl is required (provide in options or rgs_url URL param)");return m.post({rgsUrl:s,url:"/wallet/balance",variables:{sessionID:n}})},S=async e=>{const t=g(),n=e.rgsUrl||t.rgsUrl;if(!n)throw new Error("rgsUrl is required (provide in options or rgs_url URL param)");return m.get({rgsUrl:n,url:`/bet/replay/${e.game}/${e.version}/${e.mode}/${e.event}`})};let c=null,o=null,$="en",ce=!1;const k=document.getElementById("login-section"),le=document.getElementById("status-section"),T=document.getElementById("replay-section"),ie=document.getElementById("api-section"),ue=document.getElementById("output-section"),F=document.getElementById("error-section"),D=document.getElementById("url-input"),b=document.getElementById("session-input"),f=document.getElementById("rgs-input"),w=document.getElementById("lang-input"),C=document.getElementById("auth-fields"),O=document.getElementById("replay-fields"),q=document.getElementById("auth-btn"),x=document.getElementById("replay-btn"),M=document.getElementById("mode-auth"),_=document.getElementById("mode-replay"),G=document.getElementById("replay-game-input"),j=document.getElementById("replay-version-input"),N=document.getElementById("replay-mode-input"),H=document.getElementById("replay-event-input"),de=document.getElementById("status-indicator"),B=document.getElementById("balance-display"),J=document.getElementById("replay-info"),E=document.getElementById("replay-output"),me=document.getElementById("request-output"),ge=document.getElementById("response-output"),pe=document.getElementById("error-output"),V=document.getElementById("bet-options"),K=document.getElementById("event-options"),z=document.getElementById("force-options"),Q=document.getElementById("replay-options");function a(e){e.classList.remove("hidden")}function l(e){e.classList.add("hidden")}function v(){l(V),l(K),l(z),l(Q)}function U(e){return JSON.stringify(e,null,2)}function L(e,t){return`$${(e/A).toFixed(2)} ${t}`}function p(e,t){me.textContent=`// ${e}
${U(t)}`}function y(e){ge.textContent=U(e),a(ue)}function u(e){let t=e instanceof Error?e.message:String(e);t.includes("player has active bet")&&(t+=`

Hint: Click "End Round" to finish the active round first.`),pe.textContent=t,a(F)}function d(){l(F)}function W(){const e=new URLSearchParams(window.location.search);return{sessionID:e.get("sessionID"),rgsUrl:e.get("rgs_url"),language:e.get("lang")||"en"}}function h(e){e?(l(C),a(O),l(q),a(x),M.classList.remove("active"),_.classList.add("active")):(a(C),l(O),a(q),l(x),M.classList.add("active"),_.classList.remove("active"))}function X(e){try{const n=new URL(e).searchParams,s=n.get("replay")==="true";f.value=n.get("rgs_url")||"",s?(h(!0),G.value=n.get("game")||"",j.value=n.get("version")||"",N.value=n.get("mode")||"base",H.value=n.get("event")||""):(h(!1),b.value=n.get("sessionID")||"",w.value=n.get("lang")||"en")}catch{alert("Invalid URL format")}}async function I(){if(d(),c=b.value.trim(),o=f.value.trim(),$=w.value.trim()||"en",!c||!o){u("Session ID and RGS URL are required");return}try{p("authenticate",{sessionID:c,rgsUrl:o,language:$});const e=await te({sessionID:c,rgsUrl:o,language:$});y(e),e.status?.statusCode==="SUCCESS"||e.balance!=null?(ce=!0,l(k),a(le),a(ie),de.innerHTML='<span class="success">Authenticated</span>',e.balance&&(B.textContent=`Balance: ${L(e.balance.amount,e.balance.currency)}`)):u(`Authentication failed: ${e.status?.statusCode||"ERROR"} - ${e.status?.statusMessage||e.message||"Unknown error"}`)}catch(e){u(e)}}async function ye(){const e=Z();J.innerHTML=`
		<p><strong>Game:</strong> ${e.game} v${e.version}</p>
		<p><strong>Mode:</strong> ${e.mode} | <strong>Event:</strong> ${e.event}</p>
		${e.amount?`<p><strong>Original Bet:</strong> $${e.amount.toFixed(2)}</p>`:""}
	`,l(k),a(T);try{if(o=W().rgsUrl,!o){E.textContent="Error: rgs_url parameter is required for replay";return}const n=await S({game:e.game,version:e.version,mode:e.mode,event:e.event,rgsUrl:o});E.textContent=U(n)}catch(t){E.textContent=`Error: ${t instanceof Error?t.message:String(t)}`}}async function ve(){d();const e=G.value.trim(),t=j.value.trim(),n=N.value.trim()||"base",s=H.value.trim();if(o=f.value.trim(),!e||!t||!s||!o){u("Game ID, Version, Event, and RGS URL are required");return}J.innerHTML=`
		<p><strong>Game:</strong> ${e} v${t}</p>
		<p><strong>Mode:</strong> ${n} | <strong>Event:</strong> ${s}</p>
	`,l(k),a(T);try{const r=await S({game:e,version:t,mode:n,event:s,rgsUrl:o});E.textContent=U(r)}catch(r){E.textContent=`Error: ${r instanceof Error?r.message:String(r)}`}}async function Ee(){v(),d();try{p("getBalance",{sessionID:c,rgsUrl:o});const e=await ae({sessionID:c,rgsUrl:o});y(e),e.balance&&(B.textContent=`Balance: ${L(e.balance.amount,e.balance.currency)}`)}catch(e){u(e)}}function fe(){v(),a(V)}async function Ie(){d();const e=parseFloat(document.getElementById("bet-amount").value),t=document.getElementById("bet-mode").value;try{p("play",{sessionID:c,rgsUrl:o,amount:e,mode:t,currency:"USD"});const n=await ne({sessionID:c,rgsUrl:o,amount:e,mode:t,currency:"USD"});y(n),n.balance&&(B.textContent=`Balance: ${L(n.balance.amount,n.balance.currency)}`)}catch(n){u(n)}}async function he(){v(),d();try{p("endRound",{sessionID:c,rgsUrl:o});const e=await re({sessionID:c,rgsUrl:o});y(e),e.balance&&(B.textContent=`Balance: ${L(e.balance.amount,e.balance.currency)}`)}catch(e){u(e)}}function be(){v(),a(K)}async function we(){d();const e=parseInt(document.getElementById("event-index").value);try{p("endEvent",{sessionID:c,rgsUrl:o,eventIndex:e});const t=await se({sessionID:c,rgsUrl:o,eventIndex:e});y(t)}catch(t){u(t)}}function Be(){v(),a(z)}async function Ue(){d();const e=document.getElementById("force-mode").value,t=document.getElementById("force-book-id").value,n=document.getElementById("force-symbol").value,s={};t&&(s.bookID=parseInt(t)),n&&(s.symbol=n);try{p("forceResult",{rgsUrl:o,mode:e,search:s});const r=await oe({rgsUrl:o,mode:e,search:s});y(r)}catch(r){u(r)}}function Le(){v(),a(Q)}async function Re(){d();const e=document.getElementById("replay-game").value,t=document.getElementById("replay-version").value,n=document.getElementById("replay-mode").value,s=document.getElementById("replay-event").value;try{p("replay",{rgsUrl:o,game:e,version:t,mode:n,event:s});const r=await S({game:e,version:t,mode:n,event:s,rgsUrl:o});y(r)}catch(r){u(r)}}document.getElementById("parse-url-btn").addEventListener("click",()=>{X(D.value)});document.getElementById("auth-btn").addEventListener("click",I);document.getElementById("replay-btn").addEventListener("click",ve);document.getElementById("mode-auth").addEventListener("click",()=>h(!1));document.getElementById("mode-replay").addEventListener("click",()=>h(!0));document.getElementById("btn-balance").addEventListener("click",Ee);document.getElementById("btn-bet").addEventListener("click",fe);document.getElementById("btn-bet-submit").addEventListener("click",Ie);document.getElementById("btn-end-round").addEventListener("click",he);document.getElementById("btn-end-event").addEventListener("click",be);document.getElementById("btn-event-submit").addEventListener("click",we);document.getElementById("btn-force-result").addEventListener("click",Be);document.getElementById("btn-force-submit").addEventListener("click",Ue);document.getElementById("btn-replay").addEventListener("click",Le);document.getElementById("btn-replay-submit").addEventListener("click",Re);document.getElementById("btn-logout").addEventListener("click",()=>{window.location.href=window.location.pathname});document.getElementById("btn-replay-back").addEventListener("click",()=>{window.location.href=window.location.pathname});b.addEventListener("keypress",e=>{e.key==="Enter"&&I()});f.addEventListener("keypress",e=>{e.key==="Enter"&&I()});w.addEventListener("keypress",e=>{e.key==="Enter"&&I()});D.addEventListener("keypress",e=>{e.key==="Enter"&&X(D.value)});function $e(){if(ee()){ye();return}const e=W();e.sessionID&&e.rgsUrl&&(b.value=e.sessionID,f.value=e.rgsUrl,w.value=e.language,I())}$e();
